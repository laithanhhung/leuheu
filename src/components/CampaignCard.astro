---
import type { CollectionEntry } from "astro:content";
import { Play } from "lucide-astro";

interface Props {
    campaign: CollectionEntry<"campaigns">["data"];
    className?: string;
}

const { campaign, className = "" } = Astro.props;
---

<div
    class={`p-6 md:p-10 mb-12 relative ${campaign.isDark ? "bg-card-gray text-white" : "bg-white text-black"} ${className}`}
>
    {/* Badge */}
    <div class="flex justify-center mb-8">
        <span
            class="bg-neon-lime text-black px-6 py-2 rounded-full font-bold uppercase text-sm md:text-base tracking-wider inline-block"
        >
            {campaign.badge || "Campaign"}
        </span>
    </div>

    <div class="flex flex-col lg:flex-row gap-8 items-start">
        {/* Poster / Left Media */}
        <div class="w-full lg:w-1/3 shrink-0">
            <div
                class="rounded-2xl overflow-hidden shadow-2xl rotate-[-2deg] hover:rotate-0 transition-transform duration-300"
            >
                <img
                    src={campaign.posterImage}
                    alt={campaign.title}
                    class="w-full h-auto object-cover aspect-[2/3]"
                />
            </div>
        </div>

        {/* Content */}
        <div class="w-full lg:w-2/3 flex flex-col justify-between h-full">
            <div>
                <h3
                    class={`text-2xl md:text-4xl font-black mb-6 uppercase leading-tight ${campaign.isDark ? "text-white" : "text-black"}`}
                >
                    {campaign.title}
                </h3>

                <ul class="space-y-3 mb-8">
                    {
                        campaign.description.map((desc) => (
                            <li class="flex items-start gap-3 text-lg md:text-xl font-medium opacity-90">
                                <span class="text-neon-lime mt-1.5 text-xs">
                                    ‚óè
                                </span>
                                <span>{desc}</span>
                            </li>
                        ))
                    }
                </ul>

                {/* Stats Pills */}
                <div class="flex flex-wrap gap-4 mb-8">
                    {
                        campaign.mainStat && (
                            <div class="bg-gradient-to-r from-neon-lime to-green-400 text-black px-6 py-3 rounded-xl font-black text-xl shadow-lg transform -skew-x-6">
                                <span class="skew-x-6 inline-block">
                                    {campaign.mainStat}
                                </span>
                            </div>
                        )
                    }
                    {
                        campaign.secondaryStat && (
                            <div class="bg-black text-neon-lime px-6 py-3 rounded-xl font-black text-xl shadow-lg border border-neon-lime/30">
                                {campaign.secondaryStat}
                            </div>
                        )
                    }
                </div>
            </div>

            {/* Gallery Grid */}
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-auto">
                {
                    campaign.galleryImages.slice(0, 4).map((img) => (
                        <div class="relative aspect-[9/16] rounded-lg overflow-hidden group cursor-pointer">
                            <img
                                src={img}
                                alt="Gallery"
                                class="w-full h-full object-cover"
                            />
                            <div class="absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                                <Play
                                    className="text-white fill-white"
                                    size={24}
                                />
                            </div>
                            <div class="absolute bottom-2 left-2 flex items-center gap-1 text-[10px] text-white font-bold drop-shadow-md">
                                <Play size={10} class="fill-white" />{" "}
                                {(Math.random() * 10).toFixed(1)}M
                            </div>
                        </div>
                    ))
                }
            </div>
        </div>
    </div>
</div>
